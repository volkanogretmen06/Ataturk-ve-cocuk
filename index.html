<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>AtatÃ¼rk ile YÃ¼z BirleÅŸtirici â€” Volkan Ã–ÄŸretmen</title>
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at top, #0a0a0a, #1e1e1e);
  color: #fff;
  margin: 0;
  text-align: center;
}
.container {
  max-width: 1000px;
  margin: auto;
  padding: 20px;
}
h1 {
  color: #06b6d4;
  margin-bottom: 10px;
}
.card {
  background: rgba(255,255,255,0.05);
  border-radius: 12px;
  padding: 15px;
  margin-top: 15px;
}
label {
  display: block;
  margin-bottom: 6px;
  color: #ccc;
}
input[type="file"] {
  display: block;
  margin: 5px auto 10px;
}
.preview {
  margin: 10px auto;
  display: flex;
  justify-content: space-around;
  gap: 10px;
  flex-wrap: wrap;
}
.preview img {
  max-width: 45%;
  border-radius: 8px;
  border: 2px solid #06b6d4;
}
canvas {
  margin-top: 10px;
  width: 100%;
  max-width: 900px;
  border-radius: 12px;
  background: #000;
  touch-action: none;
}
button {
  background: #06b6d4;
  border: none;
  padding: 10px 15px;
  margin: 10px 5px;
  border-radius: 8px;
  color: #04202a;
  font-weight: bold;
  cursor: pointer;
}
button:hover {
  background: #0891b2;
}
select {
  margin: 10px 0;
  padding: 6px;
  border-radius: 8px;
  border: none;
}
footer {
  margin-top: 30px;
  font-size: 14px;
  color: #aaa;
}
a.insta {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: #E1306C;
  padding: 8px 10px;
  border-radius: 10px;
  color: white;
  text-decoration: none;
}
.arrow-text {
  margin-top: 8px;
  color: #E1306C;
  font-weight: bold;
  font-size: 15px;
  animation: bounce 1.2s infinite;
}
@keyframes bounce {
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-4px);}
}
</style>
</head>
<body>
<div class="container">
  <h1>AtatÃ¼rk ile YÃ¼z BirleÅŸtirici</h1>
  <p>AtatÃ¼rk'Ã¼n yÃ¼zÃ¼nÃ¼n yarÄ±sÄ± ile kendi fotoÄŸrafÄ±nÄ±zÄ± birleÅŸtirin. ğŸ“¸</p>

  <div class="card">
    <label>1ï¸âƒ£ AtatÃ¼rk GÃ¶rselini YÃ¼kle (sol taraf)</label>
    <input type="file" id="atatÃ¼rkInput" accept="image/*">

    <label>2ï¸âƒ£ Kendi FotoÄŸrafÄ±nÄ±zÄ± YÃ¼kleyin (saÄŸ taraf)</label>
    <input type="file" id="userInput" accept="image/*">

    <div class="preview" id="previewArea"></div>
  </div>

  <div class="card">
    <canvas id="canvas" width="900" height="600"></canvas>
    <div>
      <label>YakÄ±nlaÅŸtÄ±rma / UzaklaÅŸtÄ±rma: Ä°ki parmakla veya fare tekeriyle</label>
    </div>
    <button id="blendBtn">BirleÅŸtir ve Ã–nizle</button>
    <button id="downloadBtn">Ä°ndir</button>
    <select id="effectSelect">
      <option value="normal">Normal</option>
      <option value="grayscale">Siyah Beyaz</option>
      <option value="sepia">Sepya</option>
      <option value="cool">SoÄŸuk Ton</option>
    </select>
  </div>

  <div class="card" id="finalPreviewCard" style="display:none;">
    <h3>BirleÅŸtirilmiÅŸ GÃ¶rsel</h3>
    <img id="finalPreview" alt="Final Ã–nizleme" style="max-width:100%;border-radius:8px;">
  </div>

  <footer>
    <div>
      <a class="insta" href="https://www.instagram.com/volkanogretmn06" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" width="20" height="20" alt="insta">
        @volkanogretmn06
      </a>
      <div class="arrow-text">â¬‡ï¸â¬‡ï¸ Takip etmeyi unutmayÄ±n â¬‡ï¸â¬‡ï¸</div>
    </div>
    <p>HazÄ±rlayan: Volkan Ã–ÄŸretmen | EÄŸitim AmaÃ§lÄ± Uygulama</p>
  </footer>
</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const atInput = document.getElementById('atatÃ¼rkInput');
const userInput = document.getElementById('userInput');
const previewArea = document.getElementById('previewArea');
const blendBtn = document.getElementById('blendBtn');
const downloadBtn = document.getElementById('downloadBtn');
const finalPreview = document.getElementById('finalPreview');
const finalPreviewCard = document.getElementById('finalPreviewCard');
const effectSelect = document.getElementById('effectSelect');

let atImg = new Image();
let userImg = new Image();
let scale = 1;
let posX = 0, posY = 0;
let isDragging = false, lastX = 0, lastY = 0;

function updatePreview() {
  previewArea.innerHTML = '';
  if (atImg.src) {
    const img1 = document.createElement('img');
    img1.src = atImg.src;
    previewArea.appendChild(img1);
  }
  if (userImg.src) {
    const img2 = document.createElement('img');
    img2.src = userImg.src;
    previewArea.appendChild(img2);
  }
  draw();
}

atInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = evt => {
    atImg.src = evt.target.result;
    atImg.onload = updatePreview;
  };
  reader.readAsDataURL(file);
});

userInput.addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = evt => {
    userImg.src = evt.target.result;
    userImg.onload = updatePreview;
  };
  reader.readAsDataURL(file);
});

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = '#000';
  ctx.fillRect(0,0,canvas.width,canvas.height);
  if (!atImg.src || !userImg.src) return;

  const halfW = canvas.width/2;
  const height = canvas.height;

  const drawH = atImg.height * scale;
  const drawW = atImg.width * scale;
  const dx = posX + halfW - drawW/2;
  const dy = posY + height/2 - drawH/2;

  ctx.save();
  ctx.beginPath();
  ctx.rect(0,0,halfW,canvas.height);
  ctx.clip();
  ctx.drawImage(atImg,dx,dy,drawW,drawH);
  ctx.restore();

  ctx.save();
  ctx.beginPath();
  ctx.rect(halfW,0,halfW,canvas.height);
  ctx.clip();
  ctx.drawImage(userImg,dx,dy,drawW,drawH);
  ctx.restore();

  const grad = ctx.createLinearGradient(halfW-30,0,halfW+30,0);
  grad.addColorStop(0,'rgba(0,0,0,0)');
  grad.addColorStop(0.5,'rgba(0,0,0,0.3)');
  grad.addColorStop(1,'rgba(0,0,0,0)');
  ctx.fillStyle = grad;
  ctx.fillRect(halfW-30,0,60,canvas.height);
}

canvas.addEventListener('mousedown', e => {
  isDragging = true;
  lastX = e.offsetX;
  lastY = e.offsetY;
});
canvas.addEventListener('mouseup', ()=> isDragging=false);
canvas.addEventListener('mousemove', e => {
  if (!isDragging) return;
  posX += e.offsetX - lastX;
  posY += e.offsetY - lastY;
  lastX = e.offsetX;
  lastY = e.offsetY;
  draw();
});

canvas.addEventListener('wheel', e => {
  e.preventDefault();
  const delta = e.deltaY < 0 ? 1.1 : 0.9;
  scale *= delta;
  scale = Math.max(0.3, Math.min(scale, 3));
  draw();
});

blendBtn.addEventListener('click', () => {
  const off = document.createElement('canvas');
  off.width = canvas.width;
  off.height = canvas.height;
  const octx = off.getContext('2d');
  octx.drawImage(canvas,0,0);

  const eff = effectSelect.value;
  if (eff !== 'normal') {
    const imgData = octx.getImageData(0,0,off.width,off.height);
    const d = imgData.data;
    for (let i=0; i<d.length; i+=4) {
      let r=d[i],g=d[i+1],b=d[i+2];
      if (eff==='grayscale') {
        const avg=(r+g+b)/3; d[i]=d[i+1]=d[i+2]=avg;
      } else if (eff==='sepia') {
        d[i]=Math.min(255,r*0.393+g*0.769+b*0.189);
        d[i+1]=Math.min(255,r*0.349+g*0.686+b*0.168);
        d[i+2]=Math.min(255,r*0.272+g*0.534+b*0.131);
      } else if (eff==='cool') {
        d[i]=r*0.9; d[i+1]=g*0.9; d[i+2]=Math.min(255,b*1.2);
      }
    }
    octx.putImageData(imgData,0,0);
  }

  finalPreview.src = off.toDataURL('image/png');
  finalPreviewCard.style.display = 'block';
});

downloadBtn.addEventListener('click', ()=>{
  const a = document.createElement('a');
  a.download = 'birlesik-yuz.png';
  a.href = canvas.toDataURL('image/png');
  a.click();
});
</script>
</body>
</html>
